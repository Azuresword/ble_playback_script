# Web 应用快速入门指南

## 📖 简介

BLE 数据处理平台提供了友好的 Web 界面，让您无需使用命令行即可轻松处理传感器数据。

## 🚀 快速启动

### 1. 安装依赖（仅首次）

确保已安装：
- Python 3.6+
- Node.js 14+ 和 npm

### 2. 启动应用

在项目根目录运行：

```bash
./start_web.sh
```

启动脚本会自动：
- ✅ 创建 Python 虚拟环境
- ✅ 安装 Python 依赖
- ✅ 安装前端依赖
- ✅ 启动后端服务（端口 8000）
- ✅ 启动前端服务（端口 3000）

### 3. 访问应用

在浏览器中打开：

- **前端界面**: http://localhost:3000
- **API 文档**: http://localhost:8000/docs （Swagger UI）

## 📱 使用指南

### 步骤 1: 上传数据

1. 点击左侧菜单「数据上传」
2. 拖拽或点击上传您的 `data.csv` 或 `data.txt` 文件
3. 上传成功后会显示文件信息和前 10 行预览

### 步骤 2: 配置处理流程

1. 点击左侧菜单「数据处理」
2. 选择要执行的处理步骤：
   - ✅ **拆分设备数据** - 将数据按设备（WTR1/WTL1/WTB1）拆分
   - ✅ **对齐气压计数据** - 将气压计数据对齐到 IMU 数据（需要 bmp/Barometer.csv）
   - ✅ **降采样到 50Hz** - 降低采样率到 50Hz
   - ✅ **转换为二进制格式** - 生成 .bin 文件
3. 点击「开始处理」

### 步骤 3: 监控进度

- 实时进度条显示当前处理状态
- 状态消息提示当前正在执行的步骤
- 处理完成后显示生成的文件数量

### 步骤 4: 管理文件

1. 点击左侧菜单「文件管理」
2. 查看所有生成的文件
3. 可执行的操作：
   - **下载** - 下载文件到本地
   - **预览** - 查看 CSV 文件内容
   - **图表** - 可视化传感器数据

### 步骤 5: 数据可视化

1. 在文件管理页面，点击 CSV 文件的「图表」按钮
2. 自动跳转到「数据可视化」页面
3. 查看：
   - 文件统计信息（行数、列数）
   - 交互式图表（加速度、陀螺仪、磁力计等）
   - 支持缩放、拖拽、数据点查看

## 🎨 界面功能

### 主要特性

- **拖拽上传** - 支持拖拽文件上传，操作更直观
- **实时进度** - 处理过程实时反馈，进度可视化
- **文件管理** - 统一管理所有输出文件
- **数据预览** - 快速查看 CSV 文件内容
- **图表可视化** - ECharts 强大的数据可视化能力
- **响应式设计** - 支持不同屏幕尺寸

### 颜色说明

- 🟦 蓝色 - 信息提示
- 🟩 绿色 - 成功状态
- 🟨 黄色 - 警告提示
- 🟥 红色 - 错误状态

## 🔧 API 接口

访问 http://localhost:8000/docs 查看完整的 API 文档。

主要接口：

- `POST /api/upload` - 上传文件
- `POST /api/process` - 启动处理任务
- `GET /api/task/{task_id}` - 查询任务状态
- `GET /api/files` - 获取文件列表
- `GET /api/download/{device}/{filename}` - 下载文件
- `GET /api/preview/{device}/{filename}` - 预览 CSV
- `GET /api/stats/{device}/{filename}` - 获取统计信息

## ⚠️ 注意事项

1. **气压计数据**：如果没有 `bmp/Barometer.csv` 文件，会自动跳过气压计对齐步骤
2. **文件命名**：上传的文件会被保存为 `data.csv`，之前的文件会被覆盖
3. **进程管理**：按 Ctrl+C 停止所有服务
4. **端口占用**：确保 3000 和 8000 端口未被占用

## 🐛 常见问题

### 1. 启动失败

**检查 Python 版本**：
```bash
python3 --version  # 需要 3.6+
```

**检查 Node.js 版本**：
```bash
node --version     # 需要 14+
```

### 2. 端口被占用

修改端口配置：
- 后端：编辑 `app.py` 最后一行的端口号
- 前端：编辑 `web/vite.config.js` 的 `server.port`

### 3. 依赖安装失败

手动安装：
```bash
# Python 依赖
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 前端依赖
cd web
npm install
```

### 4. 文件上传失败

- 检查文件格式（必须是 .csv 或 .txt）
- 检查文件大小（建议 < 100MB）
- 查看浏览器控制台的错误信息

## 💡 最佳实践

1. **数据备份** - 处理前备份原始数据
2. **分步处理** - 首次使用建议逐步选择处理步骤
3. **验证结果** - 使用预览和图表功能验证处理结果
4. **定期清理** - 清理不需要的输出文件释放空间

## 📞 获取帮助

- 查看 [README.md](../README.md) 了解项目详情
- 查看 [CLAUDE.md](../CLAUDE.md) 了解技术架构
- 访问 API 文档 http://localhost:8000/docs

## 🎯 下一步

- 尝试上传您的第一个数据文件
- 体验完整的处理流程
- 探索数据可视化功能
- 使用 API 接口集成到您的工具链

祝您使用愉快！🎉
